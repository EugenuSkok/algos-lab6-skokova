import random

HANGMANPICS = [
    """
  +---+
  |   |
      |
      |
      |
      |
=========""",
    """
  +---+
  |   |
  O   |
      |
      |
      |
=========""",
    """
  +---+
  |   |
  O   |
  |   |
      |
      |
=========""",
    """
  +---+
  |   |
  O   |
 /|   |
      |
      |
=========""",
    """
  +---+
  |   |
  O   |
 /|\\  |
      |
      |
=========""",
    """
  +---+
  |   |
  O   |
 /|\\  |
 /    |
      |
=========""",
    """
  +---+
  |   |
  O   |
 /|\\  |
 / \\  |
      |
=========""",
]


COMMON_NOUNS = [
    "время",
    "человек",
    "год",
    "дело",
    "день",
    "рука",
    "раз",
    "город",
    "слово",
    "место",
    "лицо",
    "друг",
    "глаз",
    "вопрос",
    "дом",
    "сторона",
    "страна",
    "мир",
    "случай",
    "голова",
    "ребёнок",
    "сила",
    "конец",
    "вид",
    "система",
    "часть",
    "работа",
    "жизнь",
    "власть",
    "женщина",
    "дорога",
    "образ",
    "отец",
    "история",
    "нога",
    "вода",
    "война",
    "любовь",
    "минута",
    "право",
    "небо",
    "сын",
    "душа",
    "утро",
    "вечер",
    "месяц",
    "комната",
    "ночь",
    "мать",
    "утро",
    "вещь",
    "цель",
    "народ",
    "сердце",
    "шаг",
    "девушка",
    "машина",
    "уровень",
    "окно",
    "ответ",
    "условие",
    "начало",
    "свет",
    "действие",
    "век",
    "школа",
    "газета",
    "плечо",
    "путь",
    "дверь",
    "язык",
    "любовь",
    "порядок",
    "автор",
    "гость",
    "закон",
    "число",
    "идея",
    "смерть",
    "сон",
    "ресурс",
    "лес",
    "проблема",
    "искусство",
    "река",
    "проект",
    "журнал",
    "стена",
    "товарищ",
    "книга",
    "письмо",
    "помощь",
    "группа",
    "участие",
]

def main():
    """
    Основная цель игры: игрок должен угадать загаданное слово по буквам.
    За каждую неправильную букву рисуется часть виселицы.
    Игра продолжается, пока игрок не угадает слово или не исчерпает попытки.
    """
    print("Добро пожаловать в игру 'Виселица'! Попробуйте угадать слово.")

    while True:
        word = random.choice(COMMON_NOUNS) 
        guessed_letters = ['_'] * len(word)  
        tried_letters = set()  
        attempts_left = len(HANGMANPICS) - 1  
        wrong_guesses = 0  

        while attempts_left > 0 and '_' in guessed_letters:
            print(HANGMANPICS[wrong_guesses])
            print("Слово: ", ' '.join(guessed_letters))
            print(f"Оставшиеся попытки: {attempts_left}")
            print(f"Уже введённые буквы: {', '.join(sorted(tried_letters))}" if tried_letters else "")

            guess = input("Введите одну букву: ").lower()

            if len(guess) != 1 or not guess.isalpha():
                print("Пожалуйста, введите одну букву.")
                continue
            if guess in tried_letters:
                print("Вы уже вводили эту букву. Попробуйте другую.")
                continue

            tried_letters.add(guess)

            if guess in word:
                for idx, letter in enumerate(word):
                    if letter == guess:
                        guessed_letters[idx] = guess
                print("Отлично! Такая буква есть.")
            else:
                wrong_guesses += 1
                attempts_left -= 1
                print("К сожалению, такой буквы нет.")

            print()

        if '_' not in guessed_letters:
            print(f"Поздравляем! Вы угадали слово: {word}")
        else:
            print(HANGMANPICS[wrong_guesses])
            print(f"Вы проиграли. Загаданное слово было: {word}")
            
        again = input("Хотите сыграть снова? (да/нет): ").strip().lower()
        if again != 'да':
            print("Спасибо за игру! До новых встреч.")
            break

if __name__ == "__main__":
    main()
